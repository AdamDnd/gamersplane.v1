create view forums_permissions as select 'general' AS `type`,0 AS `typeID`,`gamersplane`.`forums_permissions_general`.`forumID` AS `forumID`,`gamersplane`.`forums_permissions_general`.`read` AS `read`,`gamersplane`.`forums_permissions_general`.`write` AS `write`,`gamersplane`.`forums_permissions_general`.`editPost` AS `editPost`,`gamersplane`.`forums_permissions_general`.`deletePost` AS `deletePost`,`gamersplane`.`forums_permissions_general`.`createThread` AS `createThread`,`gamersplane`.`forums_permissions_general`.`deleteThread` AS `deleteThread`,`gamersplane`.`forums_permissions_general`.`addPoll` AS `addPoll`,`gamersplane`.`forums_permissions_general`.`addRolls` AS `addRolls`,`gamersplane`.`forums_permissions_general`.`addDraws` AS `addDraws`,`gamersplane`.`forums_permissions_general`.`moderate` AS `moderate` from `gamersplane`.`forums_permissions_general` union select 'group' AS `type`,`gamersplane`.`forums_permissions_groups`.`groupID` AS `typeID`,`gamersplane`.`forums_permissions_groups`.`forumID` AS `forumID`,`gamersplane`.`forums_permissions_groups`.`read` AS `read`,`gamersplane`.`forums_permissions_groups`.`write` AS `write`,`gamersplane`.`forums_permissions_groups`.`editPost` AS `editPost`,`gamersplane`.`forums_permissions_groups`.`deletePost` AS `deletePost`,`gamersplane`.`forums_permissions_groups`.`createThread` AS `createThread`,`gamersplane`.`forums_permissions_groups`.`deleteThread` AS `deleteThread`,`gamersplane`.`forums_permissions_groups`.`addPoll` AS `addPoll`,`gamersplane`.`forums_permissions_groups`.`addRolls` AS `addRolls`,`gamersplane`.`forums_permissions_groups`.`addDraws` AS `addDraws`,`gamersplane`.`forums_permissions_groups`.`moderate` AS `moderate` from `gamersplane`.`forums_permissions_groups` union select 'user' AS `type`,`gamersplane`.`forums_permissions_users`.`userID` AS `typeID`,`gamersplane`.`forums_permissions_users`.`forumID` AS `forumID`,`gamersplane`.`forums_permissions_users`.`read` AS `read`,`gamersplane`.`forums_permissions_users`.`write` AS `write`,`gamersplane`.`forums_permissions_users`.`editPost` AS `editPost`,`gamersplane`.`forums_permissions_users`.`deletePost` AS `deletePost`,`gamersplane`.`forums_permissions_users`.`createThread` AS `createThread`,`gamersplane`.`forums_permissions_users`.`deleteThread` AS `deleteThread`,`gamersplane`.`forums_permissions_users`.`addPoll` AS `addPoll`,`gamersplane`.`forums_permissions_users`.`addRolls` AS `addRolls`,`gamersplane`.`forums_permissions_users`.`addDraws` AS `addDraws`,`gamersplane`.`forums_permissions_users`.`moderate` AS `moderate` from `gamersplane`.`forums_permissions_users`;
create view forums_permissions_groups_c as select `gm`.`userID` AS `userID`,`gp`.`forumID` AS `forumID`,if((max(`gp`.`read`) = 2),2,min(`gp`.`read`)) AS `read`,if((max(`gp`.`write`) = 2),2,min(`gp`.`write`)) AS `write`,if((max(`gp`.`editPost`) = 2),2,min(`gp`.`editPost`)) AS `editPost`,if((max(`gp`.`deletePost`) = 2),2,min(`gp`.`deletePost`)) AS `deletePost`,if((max(`gp`.`createThread`) = 2),2,min(`gp`.`createThread`)) AS `createThread`,if((max(`gp`.`deleteThread`) = 2),2,min(`gp`.`deleteThread`)) AS `deleteThread`,if((max(`gp`.`addPoll`) = 2),2,min(`gp`.`addPoll`)) AS `addPoll`,if((max(`gp`.`addRolls`) = 2),2,min(`gp`.`addRolls`)) AS `addRolls`,if((max(`gp`.`addDraws`) = 2),2,min(`gp`.`addDraws`)) AS `addDraws`,if((max(`gp`.`moderate`) = 2),2,min(`gp`.`moderate`)) AS `moderate` from (`gamersplane`.`forums_groupMemberships` `gm` join `gamersplane`.`forums_permissions_groups` `gp` on((`gm`.`groupID` = `gp`.`groupID`))) group by `gp`.`forumID`,`gm`.`userID`;
create view forums_readData_forums_c as select `f`.`forumID` AS `forumID`,`rdf`.`userID` AS `userID`,max(`rdf`.`lastRead`) AS `cLastRead` from ((`gamersplane`.`forums` `f` left join `gamersplane`.`forums` `p` on((`f`.`heritage` like concat(`p`.`heritage`,'%')))) left join `gamersplane`.`forums_readData_forums` `rdf` on((`p`.`forumID` = `rdf`.`forumID`))) where (`rdf`.`userID` is not null) group by `f`.`forumID`,`rdf`.`userID`;
create view forums_readData_newPosts as select `t`.`forumID` AS `forumID`,`rdf`.`userID` AS `userID`,`t`.`threadID` AS `threadID`,`r`.`lastPostID` AS `lastPostID`,`rdt`.`lastRead` AS `lastRead`,`rdf`.`cLastRead` AS `cLastRead`,if(((`r`.`lastPostID` > ifnull(`rdt`.`lastRead`,0)) and (`r`.`lastPostID` > `rdf`.`cLastRead`)),1,0) AS `newPosts` from (((`gamersplane`.`threads` `t` join `gamersplane`.`threads_relPosts` `r` on((`t`.`threadID` = `r`.`threadID`))) left join `gamersplane`.`forums_readData_forums_c` `rdf` on((`t`.`forumID` = `rdf`.`forumID`))) left join `gamersplane`.`forums_readData_threads` `rdt` on(((`t`.`threadID` = `rdt`.`threadID`) and (`rdf`.`userID` = `rdt`.`userID`)))) having (`newPosts` = 1);
create view threads_relPosts as select `gamersplane`.`posts`.`threadID` AS `threadID`,min(`gamersplane`.`posts`.`postID`) AS `firstPostID`,max(`gamersplane`.`posts`.`postID`) AS `lastPostID` from `gamersplane`.`posts` group by `gamersplane`.`posts`.`threadID`;
create view userPosts as select `gamersplane`.`posts`.`authorID` AS `userID`,count(0) AS `numPosts` from `gamersplane`.`posts` group by `gamersplane`.`posts`.`authorID`;